(()=>{var e={754:()=>{function e(){document.querySelector(".block-add").classList.add("hidden")}function t(){const e=document.querySelector(".block-main");if(e.innerHTML="",e.insertAdjacentHTML("afterbegin",'\n    <div class="title-short">Краткое описание</div>\n    <input class="input-short" name="inputShort">\n    <div class="title-full">Подробное описание</div>\n    <textarea class="text-field area-full" name="inputFull"></textarea>\n  '),this.classList.contains("icon-edit")){document.querySelector(".add-title").innerText="Изменить тикет";const t=n(this);document.querySelector(".add-id").innerText=t.id,e.querySelector(".input-short").value=t.name,e.querySelector(".area-full").value=t.description}else document.querySelector(".add-title").innerText="Добавить тикет",document.querySelector(".add-id").innerText="";document.querySelector(".block-add").classList.remove("hidden")}function n(e){const t=e.closest(".full-ticket");return{id:t.querySelector(".id").innerText,name:t.querySelector(".short").innerText,description:t.querySelector(".line-description").innerText}}function i(){const e=this.closest(".full-ticket");e.querySelector(".line-description").innerText&&e.querySelector(".line-description").classList.toggle("hidden")}function c(){l(`http://localhost:7070/?method=dellTicket&id=${n(this).id}`,"GET","",d)}function o(){const e=new FormData;this.classList.contains("completed")?(this.classList.remove("completed"),e.append("status","0")):(this.classList.add("completed"),e.append("status","1"));const t=n(this);e.append("id",t.id),l("http://localhost:7070/?method=completeTicket","POST",e,s.bind(this))}function s(e){e.status?(this.classList.add("completed"),this.innerHTML="&#10004;"):(this.classList.remove("completed"),this.innerHTML="")}function d(n){e();const s=document.querySelector(".block-tickets");s.innerHTML="";let d="",r="",l="",a="";n.forEach((e=>{d="",r="",e.status&&(d="&#10004;",r="completed"),l=new Date(e.created);const t=`0${l.getDate()}`.slice(-2),n=`0${l.getMonth()+1}`.slice(-2),i=`0${l.getFullYear()}`,c=`0${l.getHours()}`.slice(-2),o=`0${l.getMinutes()}`.slice(-2);a=`${t}.${n}.${i} ${c}:${o}`,s.insertAdjacentHTML("beforeend",`\n      <div class="full-ticket">\n        <div class="line-ticket">\n          <div class="id hidden">${e.id}</div>\n          <div class="block-status">\n            <div class="img-icon icon-status ${r}">${d}</div>\n            <div class="short">${e.name}</div>\n          </div>\n          \n          <div class="block-tech">\n            <div class="text-time">${a}</div>\n            <div class="img-icon img-margin icon-edit">&#9998;</div>\n            <div class="img-icon img-margin icon-del">&#10060;</div>\n          </div>\n        </div>\n        <div class="line-description hidden">${e.description}</div>\n      </div>\n    `)})),s.querySelectorAll(".icon-edit").forEach((e=>{e.addEventListener("click",t)})),s.querySelectorAll(".icon-del").forEach((e=>{e.addEventListener("click",c)})),s.querySelectorAll(".icon-status").forEach((e=>{e.addEventListener("click",o)})),s.querySelectorAll(".short").forEach((e=>{e.addEventListener("click",i)}))}function r(){const e=document.querySelector(".block-add"),t=new FormData;t.append("name",e.querySelector("input").value),t.append("description",e.querySelector("textarea").value);const n=e.querySelector(".add-id").innerText;n?(t.append("id",n),l("http://localhost:7070/?method=editTicket","POST",t,d)):l("http://localhost:7070/?method=createTicket","POST",t,d)}function l(e,t,n,i){const c=new XMLHttpRequest;c.responseType="json",c.open(t,e),c.send(n),c.onload=()=>{200!==c.status?document.querySelector(".err").innerText="нет связи с сервером!":(document.querySelector(".err").innerText="",i(c.response))}}document.addEventListener("DOMContentLoaded",(()=>{l("http://localhost:7070/?method=allTickets","GET","",d),document.querySelector(".btn-add-ticket").addEventListener("click",t),document.querySelector(".cancel").addEventListener("click",e),document.querySelector(".ok").addEventListener("click",r)}))}},t={};function n(i){var c=t[i];if(void 0!==c)return c.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(754)})()})();